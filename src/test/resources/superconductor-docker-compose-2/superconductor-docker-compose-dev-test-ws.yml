services:
  superconductor-db:
    image: "redis:8.0.0"
    hostname: localhost
    ports:
      - "6378:6379"
    #    environment:
    #      - "REDIS_ARGS=--appendonly yes"
    healthcheck:
      test: [ "CMD", "redis-cli" ,"ping", "superconductor-db" ]
      retries: 10
      interval: 3s
      timeout: 30s
    networks:
      docker-network:
  superconductor-afterimage:
    image: avlo/superconductor-app-redis:1.17.0
    ports:
      - "5554:5555"
    depends_on:
      superconductor-db:
        condition: service_healthy
    networks:
      docker-network:
    environment:
      superconductor.auth.active: false
      SPRING_PROFILES_ACTIVE: dev_ws
volumes:
  superconductor-db:
    driver: local
networks:
  docker-network:
    driver: bridge
